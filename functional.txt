1-Comment
2-Forum
3-Соц.сеть
4-Отзовик
5-такси
6-магазин
7-доска объявлений
8-барахолка, купи-продай, отдай, обменяй, ремонты
9-экзамены тесты
10-бла-блакар


anketa - https://forms.yandex.ru/surveys/13803642.bb8e4e52f48a918bc973e4200ca53029dcad992b/?utm_source=selection_chat&utm_medium=response&page=7
shop - https://pocoz.gitbooks.io/django-v-primerah/content/glava-7-sozdanie-internet-magazina/sozdanie-proekta-internet-magazina/sozdanie-predstavleniya-kataloga.html
proekts - https://dzen.ru/a/YRK6yvfmrCobkr0y

path converters - https://docs.djangoproject.com/en/6.0/topics/http/urls/#:~:text=converter%28%29%3A
redirect 302, 301 - https://docs.djangoproject.com/en/6.0/topics/http/shortcuts/#:~:text=permanent%3DTrue%2C%20a%20permanent%20redirect%20is%20issued%20with%20a%20301%20status%20code.
handler404 = page_not_found

redirect, reverse

HttpResponse
HttpResponsePermanentRedirect - редирект с кодом 301
HttpResponseRedirect - редирект с кодом 302

----------Структура--------------
menu
{{key1.value1}}
{{obj.a}} -class

фильтры - add {{float|add:"50"}}
{{title|cut:" "|cut:"?"}} удаляет указанные символы
{{title|upper}}
{{title:lower}}
{{title|default:"Без заголовка"}}
{{title|divisible:"2"}} проверяет кратность числа(деление на цело)
{{menu|first}} выводит первый элемент списка
{{menu|last}}  выводит последний элемент списка(коллкции)
{{menu|join:" | "}} объедтняет элементы коллекции в строку с указанным разделителем
{{menu|length}} определяет длину коллекции или 
{{The main page|slugify}} переводит строку в skug
{%autoescape off%} - или on экранирует или включает теги html
{{p.content|linebreaks|truncatewords:50}}
{%endautoescape%}
{% if not forloop.last %} https://docs.djangoproject.com/en/6.0/ref/templates/builtins/#for

from django.templates.defaultfilters import slugify импортируем любой фильтр в views.py и работаем
https://docs.djangoproject.com/en/6.0/ref/templates/builtins/#:~:text=truncatewords_html

---наследование шаблонов-------
https://docs.djangoproject.com/en/6.0/ref/templates/builtins/#:~:text=extends%20"./base2.html"%20%25%7D
{%extends%}

STATIC_URL - префикс URL-адреса для статических файлов
STATIC_ROOT - путь к общей статической папке формируемой при запуске python manage.py collectstatic
STATICFILES_DIRS - список нестандартных путей к статическим файлам
https://docs.djangoproject.com/en/6.0/ref/settings/#:~:text=STATIC_URL

--------------------------------------
python manage.py runserver --insecure для поиска статики в режиме False
-------------------------------------
simple tags – простые теги;
inclusion tags – включающие теги.
-------------------------------
Moel fields
https://docs.djangoproject.com/en/6.0/ref/models/fields/#:~:text=CharField

python manage.py makemigrations
python manage.py sqlmigrate women 0001
python manage.py migrate

Register model admin.py
@admin.register(Women)
class WomenAdmin(admin.ModelAdmin):
    pass
https://docs.djangoproject.com/en/6.0/ref/contrib/admin/#:~:text=register%28Author%29
https://docs.djangoproject.com/en/6.0/ref/checks/#:~:text=prepopulated_fields%20must%20be%20a%20dictionary.

fields
list_display=[]
prepopulated_fields={}

---------------------------CRUD-----------------------
python manage.py shell

>>> Women(title='Анджелина Джоли', content='Биография Анджелины Джоли')
<Women: Анджелина Джоли>
>>> w1=_   ссылка на последний объект
>>> w1
<Women: Анджелина Джоли>
>>> w1.save()
w1.id
w1.title

from django.db import connection
connection.queries  увидим какие sql запросы выполнялись
connection.queries [-1] последний запрос
[{'sql': 'INSERT INTO "women_women" ("title", "content", "time_create", "time_update", "is_published") VALUES (\'Анджелина Джоли\', \'Биография Анджелины Джоли\', \'2026-02-09 09:40:24.810033\', \'2026-02-09 09:40:24.810083\', 1) RETURNING "women_women"."id"', 'time': '0.002'}]       
>>>

w3.title="Anna Kurit"
w3.content='Anna smoking so match'
w3.save()

Women.objects.create(title="Ума Турман", content="Биография Умы Турман")

c=Category(name='Певицы', slug='pevici')      
c.save()

python manage.py shell_plus --print-sql -- будем видеть все запросы django-extensions

---------------------Выборка записей--------------
Women.objects.all()
Women.objects.all()[2:4]
w=Women.objects.filter(id=3)
for i in w:
    print(i.content)

---------------Сортировка записей-------------
https://docs.djangoproject.com/en/6.0/ref/models/querysets/#:~:text=order_by%28%29
https://docs.djangoproject.com/en/6.0/ref/models/options/#django.db.models.Options.ordering

Women.objects.order_by('title')
Women.objects.order_by('-title')
Women.objects.filter(pk__lte=5).order_by('title')

--------------Изменение записей-------------
w=Women.objects.get(pk=3)
w.title='Anna Nokurit'
w.content='Anna Nokurit'
w.save()

 Women.objects.update(is_published=0)
 Women.objects.filter(pk__lte=4).update(is_published=1) -- применяется для коллекций queryset

--------------Удаление записей---------------
Women.objects.filter(pk__gte=4).delete()

w=Women.objects.filter(pk__gte=4)
w.delete()

w=Women.objects.get(pk=1)
w.delete()

----------------lookapp-------
https://docs.djangoproject.com/en/6.0/ref/models/querysets/#:~:text=exact%20lookup%20in
__gt
__gte
__lt
__lte
__contains 
__icontains
pk__in=[2,4,8]

w=Women.objects.exclude(pk=2) выведет все записи кроме pk=2
w=Women.objects.get(pk=3)


----------------------Fields----------------
SlugField  -https://docs.djangoproject.com/en/6.0/ref/models/fields/#slugfield

-----------Добаваление слагов через цикл------------------
for i in Women.objects.all():
   i.slug='slug'+str(i.pk)
   i.save()


----------------SHELL commands-----------------------
python manage.py shell
python manage.py ipython
python manage.py shell_plus --print-sql

---------------------------------
get_absolute_url(self): # https://docs.djangoproject.com/en/6.0/ref/models/instances/#:~:text=get_absolute_url%28%29

<<<<<<< HEAD
----------------Самописный Manager-----------------------
# https://docs.djangoproject.com/en/6.0/topics/db/managers/
# https://github.com/django/django/blob/stable/6.0.x/django/db/models/manager.py#L176
Прописывам в models.py

choices - https://docs.djangoproject.com/en/6.0/ref/models/fields/#:~:text=choices

w.update(is_published=Women.Status.DRAFT)

Women.Status.choices
Women.Status.labels
Women.Status.values
=======

------------------Связи между таблицами----------------------
Many To One - ForeignKey   - https://docs.djangoproject.com/en/6.0/ref/models/fields/#foreignkey

cat=models.ForeignKey(Category, on_delete=models.PROTECT, verbose_name='Категория')
Women.objects.all().update(cat_id=1)


-----------------------ORM-------------------

<<<<<<< HEAD
>>>>>>> new_branch
=======
w=Women.objects.get(pk=1)
w.title
w.content
w.cat
w.cat_id
w.cat.name
w.cat.slug

c=Category.objects.get(pk=1)
c.women_set
c.women_set.all()

------добавляем related_name в поле ForeignKey------
c=Category.objects.get(pk=1)
c.posts 
c.posts.all()

Women.objects.filter(cat_id__in=[1,2])

c=Category.objects.all()
w=Women.objects.filter(cat__in=c)
w

Women.objects.filter(cat__slug='actrisy')
Women.objects.filter(cat__name__contains="цы")
Category.objects.filter(posts__title__contains="эй")
Category.objects.filter(posts__title__contains="эй").distinct() - отбирает уникальные сатегории не повторяющиеся
Category.objects.filter(posts__title__contains="a").distinct()
>>>>>>> new_branch
